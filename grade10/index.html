<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
    <style>
        .accent {
            background-color: #0b660e;
        }

        body {
            font-family: "PingFang SC", "思源黑体", "Microsoft Yahei UI", sans-serif;
        }

        h1 {
            padding-top: 20px;
            padding-bottom: 20px;
        }

        .btn-large {
            font-size: 24px;
        }
    </style>
</head>

<body class="accent">
    <div class="container transparent green-text text-lighten-5 center-align">
        <h1>本部高一家长会</h1>
        <div class="divider"></div>
        <h2 id="currentTitle">{{titleContent}}</h1>
            <p id="msg">{{msg}}</p>
            <div class="row">
                <button id="submitform" class="btn-large green green-text text-lighten-5" v-if="visible" onclick="goforms()">提交志愿</button>
                <button id="seeresults" class="btn-large green green-text text-lighten-5" v-if="visible" onclick="goexcel()">查看结果</button>
            </div>
    </div>
</body>
<script>
    var textData = {
        timefrom: [
            0,
            1557801786, //临时
            1558112400,
            1558483199, //临时
            1558483200,
            1558569600,
            Infinity
        ],
        title: [
            "敬请期待", "填写志愿时间", "填写志愿已结束, 等待后续开放", "已经排完了！请查看结果", "今天是开放日", "本次活动已结束"
        ],
        msg: [
            "将于5月22日举行高一家长会，5月27日举行高二家长会。",
            "本部高一家长请填写志愿，截止5月17日17：00。请不要重复填写",
            "正在安排中，请耐心等待下一步进展",
            "请查看结果后，为开放日做好准备",
            "北大附中欢迎您！不要忘了开放日的事情哦",
            "感谢参与，下次再见"
        ]
    }
    var theTime = new Date();
    var res = 0
    for (let index = 0; index < textData.msg.length; index++) {
        const msgT = textData.msg[index];
        const titleT = textData.title[index];
        const timefromT = textData.timefrom[index];
        const timetoT = textData.timefrom[index + 1];
        const stampInS = Date.parse(theTime) / 1000
        if (stampInS >= timefromT && stampInS <= timetoT) {
            res = index
        }
    }
    var theTitle = new Vue({
        el: '#currentTitle',
        data: {
            titleContent: textData.title[res]
        }
    })
    var themsg = new Vue({
        el: "#msg",
        data: {
            msg: textData.msg[res]
        }
    })
    var thesubmit = new Vue({
        el: "#submitform",
        data: {
            visible: res == 1
        }
    })
    var theexcel = new Vue({
        el: "#seeresults",
        data: {
            visible: res == 3
        }
    })

    function goforms() {
        window.open(
            "https://forms.office.com/Pages/ResponsePage.aspx?id=dvGcSe515EmAwVKvzSjStSO8vWcCxT5Ai6EQbNHJpRpUNEdTTjk0NlQ0MEcyUzRYWUJDOUowMkVKOS4u",
            "_self");
    }

    function goexcel(params) {
        M.toast({
            html: "尚未开放"
        })
    }
</script>

</html>